<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="https://github.com/langpavel/node-pg-async#readme"

    >pg-async (v2.4.3)</a>
</h1>
<h4>PostgreSQL client for node.js designed for usage with ES7 async/await based on node-postgres (pg) module</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.pg-async">module pg-async</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pg-async.SQL">
            function <span class="apidocSignatureSpan">pg-async.</span>SQL
            <span class="apidocSignatureSpan">(parts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pg-async.default">
            function <span class="apidocSignatureSpan">pg-async.</span>default
            <span class="apidocSignatureSpan">(connectionOptions, driver)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pg-async.identifier">
            function <span class="apidocSignatureSpan">pg-async.</span>identifier
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pg-async.literal">
            function <span class="apidocSignatureSpan">pg-async.</span>literal
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pg-async.sqlStr">
            function <span class="apidocSignatureSpan">pg-async.</span>sqlStr
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">pg-async.</span>SQL._transforms</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">pg-async.</span>debug</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">pg-async.</span>makeAsyncApi</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">pg-async.</span>sql</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.pg-async.SQL">module pg-async.SQL</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pg-async.SQL.SQL">
            function <span class="apidocSignatureSpan">pg-async.</span>SQL
            <span class="apidocSignatureSpan">(parts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pg-async.SQL.registerTransform">
            function <span class="apidocSignatureSpan">pg-async.SQL.</span>registerTransform
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pg-async.SQL.transform">
            function <span class="apidocSignatureSpan">pg-async.SQL.</span>transform
            <span class="apidocSignatureSpan">(name, value)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">pg-async.SQL.</span>DEFAULT</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">pg-async.SQL.</span>NULL</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">pg-async.SQL.</span>_transforms</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.pg-async.SQL._transforms">module pg-async.SQL._transforms</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pg-async.SQL._transforms.id">
            function <span class="apidocSignatureSpan">pg-async.SQL._transforms.</span>id
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pg-async.SQL._transforms.ident">
            function <span class="apidocSignatureSpan">pg-async.SQL._transforms.</span>ident
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pg-async.SQL._transforms.identifier">
            function <span class="apidocSignatureSpan">pg-async.SQL._transforms.</span>identifier
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pg-async.SQL._transforms.insert">
            function <span class="apidocSignatureSpan">pg-async.SQL._transforms.</span>insert
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pg-async.SQL._transforms.insert_object">
            function <span class="apidocSignatureSpan">pg-async.SQL._transforms.</span>insert_object
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pg-async.SQL._transforms.literal">
            function <span class="apidocSignatureSpan">pg-async.SQL._transforms.</span>literal
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pg-async.SQL._transforms.name">
            function <span class="apidocSignatureSpan">pg-async.SQL._transforms.</span>name
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pg-async.SQL._transforms.raw">
            function <span class="apidocSignatureSpan">pg-async.SQL._transforms.</span>raw
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.pg-async.debug">module pg-async.debug</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pg-async.debug.default">
            function <span class="apidocSignatureSpan">pg-async.debug.</span>default
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.pg-async.default">module pg-async.default</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pg-async.default.default">
            function <span class="apidocSignatureSpan">pg-async.</span>default
            <span class="apidocSignatureSpan">(connectionOptions, driver)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pg-async.default.SQL">
            function <span class="apidocSignatureSpan">pg-async.default.</span>SQL
            <span class="apidocSignatureSpan">(parts)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.pg-async.makeAsyncApi">module pg-async.makeAsyncApi</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pg-async.makeAsyncApi.default">
            function <span class="apidocSignatureSpan">pg-async.makeAsyncApi.</span>default
            <span class="apidocSignatureSpan">(sql)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.pg-async.sql">module pg-async.sql</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pg-async.sql.SqlFragment">
            function <span class="apidocSignatureSpan">pg-async.sql.</span>SqlFragment
            <span class="apidocSignatureSpan">(templateParts, templateValues)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pg-async.sql.default">
            function <span class="apidocSignatureSpan">pg-async.sql.</span>default
            <span class="apidocSignatureSpan">(parts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pg-async.sql.escapeIdentifier">
            function <span class="apidocSignatureSpan">pg-async.sql.</span>escapeIdentifier
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pg-async.sql.escapeLiteral">
            function <span class="apidocSignatureSpan">pg-async.sql.</span>escapeLiteral
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pg-async.sql.identifier">
            function <span class="apidocSignatureSpan">pg-async.sql.</span>identifier
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pg-async.sql.insert_object">
            function <span class="apidocSignatureSpan">pg-async.sql.</span>insert_object
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pg-async.sql.literal">
            function <span class="apidocSignatureSpan">pg-async.sql.</span>literal
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pg-async.sql.sqlStr">
            function <span class="apidocSignatureSpan">pg-async.sql.</span>sqlStr
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.pg-async" id="apidoc.module.pg-async">module pg-async</a></h1>


    <h2>
        <a href="#apidoc.element.pg-async.SQL" id="apidoc.element.pg-async.SQL">
        function <span class="apidocSignatureSpan">pg-async.</span>SQL
        <span class="apidocSignatureSpan">(parts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SQL(parts) {
  for (var _len = arguments.length, values = Array(_len &#x3e; 1 ? _len - 1 : 0), _key = 1; _key &#x3c; _len; _key++) {
    values[_key - 1] = arguments[_key];
  }

  // eslint-disable-line prefer-const
  // only one argument, called manually
  if (!Array.isArray(parts) &#x26;&#x26; values.length === 0) {
    if (parts instanceof SqlFragment) return parts;

    parts = [parts];
  }

  return new SqlFragment(parts, values);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pg-async.default" id="apidoc.element.pg-async.default">
        function <span class="apidocSignatureSpan">pg-async.</span>default
        <span class="apidocSignatureSpan">(connectionOptions, driver)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">class PgAsync {
  constructor(connectionOptions, driver) {
    this.SQL = _sql2.default;

    this.closeConnections = () =&#x3e; this.getDriver().end();

    this.setConnectionOptions(connectionOptions);
    this.setDriver(driver);

    const self = this;
    const wrap = name =&#x3e; {
      self[name] = function (sql) {
        for (var _len = arguments.length, values = Array(_len &#x3e; 1 ? _len - 1 : 0), _key = 1; _key &#x3c; _len; _key++) {
          values[_key - 1] = arguments[_key];
        }

        return self.connect(client =&#x3e; client[`${ name }Args`](sql, values));
      };
    };
    const wrapArgs = name =&#x3e; {
      self[name] = (sql, values) =&#x3e; self.connect(client =&#x3e; client[name](sql, values));
    };

    wrap(&#x27;query&#x27;);
    wrapArgs(&#x27;queryArgs&#x27;);

    wrap(&#x27;rows&#x27;);
    wrapArgs(&#x27;rowsArgs&#x27;);

    wrap(&#x27;row&#x27;);
    wrapArgs(&#x27;rowArgs&#x27;);

    wrap(&#x27;value&#x27;);
    wrapArgs(&#x27;valueArgs&#x27;);
  }

  setConnectionOptions(options) {
    this._connectionOptions = options;
    return this;
  }

  getConnectionOptions() {
    return this._connectionOptions || this.getDriver().defaults;
  }

  getDriver() {
    return this._driver;
  }

  setDriver(driver) {
    if (typeof driver === &#x27;string&#x27;) switch (driver) {
      case &#x27;&#x27;:case &#x27;pg&#x27;:
        driver = _pg2.default;
        break;
      case &#x27;native&#x27;:case &#x27;pg.native&#x27;:
        driver = _pg2.default.native;
        break;
      default:
        throw new Error(`Unrecognized driver name: ${ driver }`);
    }
    this._driver = driver || _pg2.default;
    return this;
  }

  getClient() {
    var _this = this;

    return _asyncToGenerator(function* () {
      return new _bluebird2.default(function (resolve, reject) {
        _this.getDriver().connect(_this.getConnectionOptions(), function (err, client, _done) {
          if (err) {
            (0, _debug2.default)(&#x27;%s getClient(%j)&#x27;, err, _this.getConnectionOptions());
            if (_done) _done(err);
            return reject(err);
          }
          return resolve({
            client: client,
            done: function done() {
              (0, _debug2.default)(&#x27;Client released&#x27;);
              _done();
            }
          });
        });
      });
    })();
  }

  connect(asyncFunc) {
    var _this2 = this;

    return _asyncToGenerator(function* () {
      checkAsyncFunction(asyncFunc);

      var _ref = yield _this2.getClient();

      const client = _ref.client,
            done = _ref.done;

      try {
        const api = (0, _makeAsyncApi2.default)(client);
        const result = yield asyncFunc(api);
        yield api._end();
        done();
        return result;
      } catch (err) {
        done(err);
        throw err;
      }
    })();
  }

  transaction(asyncFunc) {
    var _this3 = this;

    return _asyncToGenerator(function* () {
      checkAsyncFunction(asyncFunc);

      return yield _this3.connect((() =&#x3e; {
        var _ref2 = _asyncToGenerator(function* (client) {
          client.checkSerialAccess = true;
          yield client.startTransaction();
          try {
            const result = yield asyncFunc(client);
            yield client.commit();
            return result;
          } catch (err) {
            try {
              yield client.rollback();
            } catch (_) {
              // client disconnected?
            }
            throw err;
          }
        });

        return function (_x) {
          return _ref2.apply(this, arguments);
        };
      })());
    })();
  }

}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

var _sql = require(&#x27;./sql&#x27;);

var _sql2 = _interopRequireDefault(_sql);

function _interopRequireDefault(obj) { return obj &#x26;&#x26; obj.__esModule ? obj : { default: obj }; }

function _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new _bluebird2.<span class="apidocCodeKeywordSpan
">default</span>(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; }
catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return _bluebird2.default.resolve(value).then
(function (value) { step(&#x22;next&#x22;, value); }, function (err) { step(&#x22;throw&#x22;, err); }); } } return step(&#x22;next
&#x22;); }); }; }

const makeAsyncApi = client =&#x3e; {

let inQuery = false;

function query(sql) {
  for (var _len = arguments.length, values = Array(_len &#x3e; 1 ? _len - 1 : 0), _key = 1; _key &#x3c; _len; _key++) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pg-async.identifier" id="apidoc.element.pg-async.identifier">
        function <span class="apidocSignatureSpan">pg-async.</span>identifier
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function identifier(name) {
  if (!name) throw new Error(`Expected nonempty string, got ${ (0, _util.inspect)(name) }`);

  return SQL(escapeIdentifier(name));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pg-async.literal" id="apidoc.element.pg-async.literal">
        function <span class="apidocSignatureSpan">pg-async.</span>literal
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function literal(value) {
  if (value instanceof SqlFragment) return value;

  if (typeof value === &#x27;undefined&#x27;) throw new Error(`Expected something, but got undefined.`);

  if (value === null) return SQL.NULL;

  if (value.toPostgres) return SQL(escapeLiteral(value.toPostgres(_utils.prepareValue)));

  if (value.toSQL) return SQL(value.toSQL());

  return SQL(escapeLiteral(value.toString()));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pg-async.sqlStr" id="apidoc.element.pg-async.sqlStr">
        function <span class="apidocSignatureSpan">pg-async.</span>sqlStr
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function sqlStr(str) {
  if (typeof str !== &#x27;string&#x27;) throw new Error(`Expected string, got ${ (0, _util.inspect)(str) }`);

  return SQL(str);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>










</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.pg-async.SQL" id="apidoc.module.pg-async.SQL">module pg-async.SQL</a></h1>


    <h2>
        <a href="#apidoc.element.pg-async.SQL.SQL" id="apidoc.element.pg-async.SQL.SQL">
        function <span class="apidocSignatureSpan">pg-async.</span>SQL
        <span class="apidocSignatureSpan">(parts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SQL(parts) {
  for (var _len = arguments.length, values = Array(_len &#x3e; 1 ? _len - 1 : 0), _key = 1; _key &#x3c; _len; _key++) {
    values[_key - 1] = arguments[_key];
  }

  // eslint-disable-line prefer-const
  // only one argument, called manually
  if (!Array.isArray(parts) &#x26;&#x26; values.length === 0) {
    if (parts instanceof SqlFragment) return parts;

    parts = [parts];
  }

  return new SqlFragment(parts, values);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pg-async.SQL.registerTransform" id="apidoc.element.pg-async.SQL.registerTransform">
        function <span class="apidocSignatureSpan">pg-async.SQL.</span>registerTransform
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">registerTransform = function () {
  for (var _len2 = arguments.length, names = Array(_len2), _key2 = 0; _key2 &#x3c; _len2; _key2++) {
    names[_key2] = arguments[_key2];
  }

  const transform = names.pop();
  if (typeof transform !== &#x27;function&#x27;) throw new Error(&#x27;Last argument must be a function&#x27;);

  const transforms = SQL._transforms;
  for (let i = 0; i &#x3c; names.length; i++) {
    const name = names[i].trim().toLowerCase();
    if (transforms[name] &#x26;&#x26; transforms[name] !== transform) throw new Error(`Transform ${ name } already registered`);
    transforms[names[i].toLowerCase()] = transform;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  sb[sb.length - 1] = &#x27;) VALUES (&#x27;;
  sqlFragments[0] = sb.join(&#x27;&#x27;);
  sqlFragments[i] = &#x27;)&#x27;;

  return new SqlFragment(sqlFragments, values);
}

SQL.<span class="apidocCodeKeywordSpan">registerTransform</span>(&#x27;id&#x27;, &#x27;ident&#x27;, &#x27;identifier&#x27;, &#x27
;name&#x27;, identifier);
SQL.registerTransform(&#x27;&#x27;, &#x27;literal&#x27;, literal);
SQL.registerTransform(&#x27;!&#x27;, &#x27;raw&#x27;, sqlStr);
SQL.registerTransform(&#x27;insert_object&#x27;, &#x27;insert&#x27;, insert_object);

exports.default = SQL;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pg-async.SQL.transform" id="apidoc.element.pg-async.SQL.transform">
        function <span class="apidocSignatureSpan">pg-async.SQL.</span>transform
        <span class="apidocSignatureSpan">(name, value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">(name, value) =&#x3e; {
  name = name.trim().toLowerCase();
  const transform = SQL._transforms[name];
  if (!transform) throw new Error(`Unknown transform: &#x22;${ name }&#x22;`);
  return transform(value);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    };

    while (i &#x3c; length) {
const parts = templateParts[i].split(&#x27;$&#x27;);
let value = templateValues.shift();
if (typeof value === &#x27;undefined&#x27;) throw new Error(`Expected something, but got undefined. ` + `Value after SQL fragment
: ${ text.join(&#x27;&#x27;) }${ templateParts[i] }`);

while (parts.length &#x3e; 1) value = SQL.<span class="apidocCodeKeywordSpan">transform</span>(parts.pop(), value);

addText(parts[0]);

if (value &#x26;&#x26; value.toSQL) value = value.toSQL();

if (value instanceof SqlFragment) {
  const nestedValuesLength = value.values.length;
...</pre></li>
    </ul>








</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.pg-async.SQL._transforms" id="apidoc.module.pg-async.SQL._transforms">module pg-async.SQL._transforms</a></h1>


    <h2>
        <a href="#apidoc.element.pg-async.SQL._transforms.id" id="apidoc.element.pg-async.SQL._transforms.id">
        function <span class="apidocSignatureSpan">pg-async.SQL._transforms.</span>id
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function identifier(name) {
  if (!name) throw new Error(`Expected nonempty string, got ${ (0, _util.inspect)(name) }`);

  return SQL(escapeIdentifier(name));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pg-async.SQL._transforms.ident" id="apidoc.element.pg-async.SQL._transforms.ident">
        function <span class="apidocSignatureSpan">pg-async.SQL._transforms.</span>ident
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function identifier(name) {
  if (!name) throw new Error(`Expected nonempty string, got ${ (0, _util.inspect)(name) }`);

  return SQL(escapeIdentifier(name));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pg-async.SQL._transforms.identifier" id="apidoc.element.pg-async.SQL._transforms.identifier">
        function <span class="apidocSignatureSpan">pg-async.SQL._transforms.</span>identifier
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function identifier(name) {
  if (!name) throw new Error(`Expected nonempty string, got ${ (0, _util.inspect)(name) }`);

  return SQL(escapeIdentifier(name));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pg-async.SQL._transforms.insert" id="apidoc.element.pg-async.SQL._transforms.insert">
        function <span class="apidocSignatureSpan">pg-async.SQL._transforms.</span>insert
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function insert_object(data) {
  const keys = Object.keys(data);
  const length = keys.length;
  const sqlFragments = new Array(length);
  const values = new Array(length - 1);
  const sb = [];

  sb.push(&#x27;(&#x27;);
  let i = 0;
  while (i &#x3c; length) {
    const column = keys[i];
    values[i] = data[column];
    i++;
    sb.push(escapeIdentifier(column), &#x27;,&#x27;);
    sqlFragments[i] = &#x27;,&#x27;;
  }
  sb[sb.length - 1] = &#x27;) VALUES (&#x27;;
  sqlFragments[0] = sb.join(&#x27;&#x27;);
  sqlFragments[i] = &#x27;)&#x27;;

  return new SqlFragment(sqlFragments, values);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pg-async.SQL._transforms.insert_object" id="apidoc.element.pg-async.SQL._transforms.insert_object">
        function <span class="apidocSignatureSpan">pg-async.SQL._transforms.</span>insert_object
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function insert_object(data) {
  const keys = Object.keys(data);
  const length = keys.length;
  const sqlFragments = new Array(length);
  const values = new Array(length - 1);
  const sb = [];

  sb.push(&#x27;(&#x27;);
  let i = 0;
  while (i &#x3c; length) {
    const column = keys[i];
    values[i] = data[column];
    i++;
    sb.push(escapeIdentifier(column), &#x27;,&#x27;);
    sqlFragments[i] = &#x27;,&#x27;;
  }
  sb[sb.length - 1] = &#x27;) VALUES (&#x27;;
  sqlFragments[0] = sb.join(&#x27;&#x27;);
  sqlFragments[i] = &#x27;)&#x27;;

  return new SqlFragment(sqlFragments, values);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pg-async.SQL._transforms.literal" id="apidoc.element.pg-async.SQL._transforms.literal">
        function <span class="apidocSignatureSpan">pg-async.SQL._transforms.</span>literal
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function literal(value) {
  if (value instanceof SqlFragment) return value;

  if (typeof value === &#x27;undefined&#x27;) throw new Error(`Expected something, but got undefined.`);

  if (value === null) return SQL.NULL;

  if (value.toPostgres) return SQL(escapeLiteral(value.toPostgres(_utils.prepareValue)));

  if (value.toSQL) return SQL(value.toSQL());

  return SQL(escapeLiteral(value.toString()));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pg-async.SQL._transforms.name" id="apidoc.element.pg-async.SQL._transforms.name">
        function <span class="apidocSignatureSpan">pg-async.SQL._transforms.</span>name
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function identifier(name) {
  if (!name) throw new Error(`Expected nonempty string, got ${ (0, _util.inspect)(name) }`);

  return SQL(escapeIdentifier(name));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pg-async.SQL._transforms.raw" id="apidoc.element.pg-async.SQL._transforms.raw">
        function <span class="apidocSignatureSpan">pg-async.SQL._transforms.</span>raw
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function sqlStr(str) {
  if (typeof str !== &#x27;string&#x27;) throw new Error(`Expected string, got ${ (0, _util.inspect)(str) }`);

  return SQL(str);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.pg-async.debug" id="apidoc.module.pg-async.debug">module pg-async.debug</a></h1>


    <h2>
        <a href="#apidoc.element.pg-async.debug.default" id="apidoc.element.pg-async.debug.default">
        function <span class="apidocSignatureSpan">pg-async.debug.</span>default
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function debug() {
  // disabled?
  if (!debug.enabled) return;

  var self = debug;

  // set `diff` timestamp
  var curr = +new Date();
  var ms = curr - (prevTime || curr);
  self.diff = ms;
  self.prev = prevTime;
  self.curr = curr;
  prevTime = curr;

  // turn the `arguments` into a proper Array
  var args = new Array(arguments.length);
  for (var i = 0; i &#x3c; args.length; i++) {
    args[i] = arguments[i];
  }

  args[0] = exports.coerce(args[0]);

  if (&#x27;string&#x27; !== typeof args[0]) {
    // anything else let&#x27;s inspect with %O
    args.unshift(&#x27;%O&#x27;);
  }

  // apply any `formatters` transformations
  var index = 0;
  args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {
    // if we encounter an escaped % then don&#x27;t increase the array index
    if (match === &#x27;%%&#x27;) return match;
    index++;
    var formatter = exports.formatters[format];
    if (&#x27;function&#x27; === typeof formatter) {
      var val = args[index];
      match = formatter.call(self, val);

      // now we need to remove `args[index]` since it&#x27;s inlined in the `format`
      args.splice(index, 1);
      index--;
    }
    return match;
  });

  // apply env-specific formatting (colors, etc.)
  exports.formatArgs.call(self, args);

  var logFn = debug.log || exports.log || console.log.bind(console);
  logFn.apply(self, args);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

var _sql = require(&#x27;./sql&#x27;);

var _sql2 = _interopRequireDefault(_sql);

function _interopRequireDefault(obj) { return obj &#x26;&#x26; obj.__esModule ? obj : { default: obj }; }

function _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new _bluebird2.<span class="apidocCodeKeywordSpan
">default</span>(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; }
catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return _bluebird2.default.resolve(value).then
(function (value) { step(&#x22;next&#x22;, value); }, function (err) { step(&#x22;throw&#x22;, err); }); } } return step(&#x22;next
&#x22;); }); }; }

const makeAsyncApi = client =&#x3e; {

let inQuery = false;

function query(sql) {
  for (var _len = arguments.length, values = Array(_len &#x3e; 1 ? _len - 1 : 0), _key = 1; _key &#x3c; _len; _key++) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.pg-async.default" id="apidoc.module.pg-async.default">module pg-async.default</a></h1>


    <h2>
        <a href="#apidoc.element.pg-async.default.default" id="apidoc.element.pg-async.default.default">
        function <span class="apidocSignatureSpan">pg-async.</span>default
        <span class="apidocSignatureSpan">(connectionOptions, driver)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">class PgAsync {
  constructor(connectionOptions, driver) {
    this.SQL = _sql2.default;

    this.closeConnections = () =&#x3e; this.getDriver().end();

    this.setConnectionOptions(connectionOptions);
    this.setDriver(driver);

    const self = this;
    const wrap = name =&#x3e; {
      self[name] = function (sql) {
        for (var _len = arguments.length, values = Array(_len &#x3e; 1 ? _len - 1 : 0), _key = 1; _key &#x3c; _len; _key++) {
          values[_key - 1] = arguments[_key];
        }

        return self.connect(client =&#x3e; client[`${ name }Args`](sql, values));
      };
    };
    const wrapArgs = name =&#x3e; {
      self[name] = (sql, values) =&#x3e; self.connect(client =&#x3e; client[name](sql, values));
    };

    wrap(&#x27;query&#x27;);
    wrapArgs(&#x27;queryArgs&#x27;);

    wrap(&#x27;rows&#x27;);
    wrapArgs(&#x27;rowsArgs&#x27;);

    wrap(&#x27;row&#x27;);
    wrapArgs(&#x27;rowArgs&#x27;);

    wrap(&#x27;value&#x27;);
    wrapArgs(&#x27;valueArgs&#x27;);
  }

  setConnectionOptions(options) {
    this._connectionOptions = options;
    return this;
  }

  getConnectionOptions() {
    return this._connectionOptions || this.getDriver().defaults;
  }

  getDriver() {
    return this._driver;
  }

  setDriver(driver) {
    if (typeof driver === &#x27;string&#x27;) switch (driver) {
      case &#x27;&#x27;:case &#x27;pg&#x27;:
        driver = _pg2.default;
        break;
      case &#x27;native&#x27;:case &#x27;pg.native&#x27;:
        driver = _pg2.default.native;
        break;
      default:
        throw new Error(`Unrecognized driver name: ${ driver }`);
    }
    this._driver = driver || _pg2.default;
    return this;
  }

  getClient() {
    var _this = this;

    return _asyncToGenerator(function* () {
      return new _bluebird2.default(function (resolve, reject) {
        _this.getDriver().connect(_this.getConnectionOptions(), function (err, client, _done) {
          if (err) {
            (0, _debug2.default)(&#x27;%s getClient(%j)&#x27;, err, _this.getConnectionOptions());
            if (_done) _done(err);
            return reject(err);
          }
          return resolve({
            client: client,
            done: function done() {
              (0, _debug2.default)(&#x27;Client released&#x27;);
              _done();
            }
          });
        });
      });
    })();
  }

  connect(asyncFunc) {
    var _this2 = this;

    return _asyncToGenerator(function* () {
      checkAsyncFunction(asyncFunc);

      var _ref = yield _this2.getClient();

      const client = _ref.client,
            done = _ref.done;

      try {
        const api = (0, _makeAsyncApi2.default)(client);
        const result = yield asyncFunc(api);
        yield api._end();
        done();
        return result;
      } catch (err) {
        done(err);
        throw err;
      }
    })();
  }

  transaction(asyncFunc) {
    var _this3 = this;

    return _asyncToGenerator(function* () {
      checkAsyncFunction(asyncFunc);

      return yield _this3.connect((() =&#x3e; {
        var _ref2 = _asyncToGenerator(function* (client) {
          client.checkSerialAccess = true;
          yield client.startTransaction();
          try {
            const result = yield asyncFunc(client);
            yield client.commit();
            return result;
          } catch (err) {
            try {
              yield client.rollback();
            } catch (_) {
              // client disconnected?
            }
            throw err;
          }
        });

        return function (_x) {
          return _ref2.apply(this, arguments);
        };
      })());
    })();
  }

}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

var _sql = require(&#x27;./sql&#x27;);

var _sql2 = _interopRequireDefault(_sql);

function _interopRequireDefault(obj) { return obj &#x26;&#x26; obj.__esModule ? obj : { default: obj }; }

function _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new _bluebird2.<span class="apidocCodeKeywordSpan
">default</span>(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; }
catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return _bluebird2.default.resolve(value).then
(function (value) { step(&#x22;next&#x22;, value); }, function (err) { step(&#x22;throw&#x22;, err); }); } } return step(&#x22;next
&#x22;); }); }; }

const makeAsyncApi = client =&#x3e; {

let inQuery = false;

function query(sql) {
  for (var _len = arguments.length, values = Array(_len &#x3e; 1 ? _len - 1 : 0), _key = 1; _key &#x3c; _len; _key++) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pg-async.default.SQL" id="apidoc.element.pg-async.default.SQL">
        function <span class="apidocSignatureSpan">pg-async.default.</span>SQL
        <span class="apidocSignatureSpan">(parts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SQL(parts) {
  for (var _len = arguments.length, values = Array(_len &#x3e; 1 ? _len - 1 : 0), _key = 1; _key &#x3c; _len; _key++) {
    values[_key - 1] = arguments[_key];
  }

  // eslint-disable-line prefer-const
  // only one argument, called manually
  if (!Array.isArray(parts) &#x26;&#x26; values.length === 0) {
    if (parts instanceof SqlFragment) return parts;

    parts = [parts];
  }

  return new SqlFragment(parts, values);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.pg-async.makeAsyncApi" id="apidoc.module.pg-async.makeAsyncApi">module pg-async.makeAsyncApi</a></h1>


    <h2>
        <a href="#apidoc.element.pg-async.makeAsyncApi.default" id="apidoc.element.pg-async.makeAsyncApi.default">
        function <span class="apidocSignatureSpan">pg-async.makeAsyncApi.</span>default
        <span class="apidocSignatureSpan">(sql)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">client =&#x3e; {

  let inQuery = false;

  function query(sql) {
    for (var _len = arguments.length, values = Array(_len &#x3e; 1 ? _len - 1 : 0), _key = 1; _key &#x3c; _len; _key++) {
      values[_key - 1] = arguments[_key];
    }

    return query.queryArgs(sql, values);
  }

  let _queryArgs = (sql, values) =&#x3e; {
    if (sql instanceof _sql.SqlFragment) {
      values = sql.values;
      sql = sql.text;
    }

    inQuery = true;
    return new _bluebird2.default((resolve, reject) =&#x3e; {
      (0, _debug2.default)(&#x27;query params: %s query: %j&#x27;, JSON.stringify(values).slice(0, 60), sql);
      client.query(sql, values, (err, result) =&#x3e; {
        inQuery = false;
        if (err) {
          (0, _debug2.default)(&#x27;%s query(%j, %j)&#x27;, err, sql, values);
          return reject(err);
        }
        (0, _debug2.default)(&#x27;query ok: %d rows&#x27;, result.rowCount);
        return resolve(result);
      });
    });
  };

  query.SQL = _sql2.default;

  query.query = function (sql) {
    for (var _len2 = arguments.length, values = Array(_len2 &#x3e; 1 ? _len2 - 1 : 0), _key2 = 1; _key2 &#x3c; _len2; _key2++) {
      values[_key2 - 1] = arguments[_key2];
    }

    return query.queryArgs(sql, values);
  };
  query.queryArgs = (sql, values) =&#x3e; {
    if (inQuery) throw new Error(&#x27;Commands on same client should be called serially. &#x27; + &#x27;Do you forget `await`?&#x27;);
    return _queryArgs(sql, values);
  };

  query.rows = function (sql) {
    for (var _len3 = arguments.length, values = Array(_len3 &#x3e; 1 ? _len3 - 1 : 0), _key3 = 1; _key3 &#x3c; _len3; _key3++) {
      values[_key3 - 1] = arguments[_key3];
    }

    return query.rowsArgs(sql, values);
  };
  query.rowsArgs = (sql, values) =&#x3e; query.queryArgs(sql, values).then(r =&#x3e; r.rows);

  query.row = function (sql) {
    for (var _len4 = arguments.length, values = Array(_len4 &#x3e; 1 ? _len4 - 1 : 0), _key4 = 1; _key4 &#x3c; _len4; _key4++) {
      values[_key4 - 1] = arguments[_key4];
    }

    return query.rowArgs(sql, values);
  };
  query.rowArgs = (() =&#x3e; {
    var _ref = _asyncToGenerator(function* (sql, values) {
      const result = yield query.queryArgs(sql, values);
      if (result.rowCount !== 1) throw new Error(`SQL: Expected exactly one row result but ${ result.rowCount } returned`);
      return result.rows[0];
    });

    return function (_x, _x2) {
      return _ref.apply(this, arguments);
    };
  })();

  query.value = (() =&#x3e; {
    var _ref2 = _asyncToGenerator(function* (sql) {
      for (var _len5 = arguments.length, values = Array(_len5 &#x3e; 1 ? _len5 - 1 : 0), _key5 = 1; _key5 &#x3c; _len5; _key5++) {
        values[_key5 - 1] = arguments[_key5];
      }

      return query.valueArgs(sql, values);
    });

    return function (_x3) {
      return _ref2.apply(this, arguments);
    };
  })();
  query.valueArgs = (() =&#x3e; {
    var _ref3 = _asyncToGenerator(function* (sql, values) {
      let opts;
      if (sql instanceof _sql.SqlFragment) {
        opts = _extends({}, sql, {
          rowMode: &#x27;array&#x27;
        });
        values = sql.values;
      } else {
        opts = typeof sql === &#x27;string&#x27; ? { text: sql, rowMode: &#x27;array&#x27; } : _extends({}, sql, { rowMode: &#x27;array&#x27; });
      }

      const result = yield query.rowArgs(opts, values);
      if (result.length !== 1) throw new Error(`SQL: Expected exactly one column but ${ result.length } returned`);
      return result[0];
    });

    return function (_x4, _x5) {
      return _ref3.apply(this, arguments);
    };
  })();

  query.inTransaction = false;

  query.startTransaction = () =&#x3e; {
    query.inTransaction = true;
    return query.query(&#x27;BEGIN&#x27;);
  };

  query.commit = () =&#x3e; {
    query.inTransaction = false;
    return query.query(&#x27;COMMIT&#x27;);
  };

  query.rollback = () =&#x3e; {
    query.inTransaction = false;
    return _queryArgs(&#x27;ROLLBACK&#x27;, []);
  };

  query._end = () =&#x3e; {
    const queryArgs = _queryArgs;
    _queryArgs = () =&#x3e; {
      throw new Error(&#x27;Client was released.&#x27;);
    };
    return new _bluebird2.default(resolve =&#x3e; {
      if (inQuery) throw new Error(&#x27;Client shutting down but query is pending. &#x27; + &#x27;Do you forget `await`?&#x27;);

      if (query.inTra ...</pre></li>
    <li>example usage<pre class="apidocCodePre">...

var _sql = require(&#x27;./sql&#x27;);

var _sql2 = _interopRequireDefault(_sql);

function _interopRequireDefault(obj) { return obj &#x26;&#x26; obj.__esModule ? obj : { default: obj }; }

function _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new _bluebird2.<span class="apidocCodeKeywordSpan
">default</span>(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; }
catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return _bluebird2.default.resolve(value).then
(function (value) { step(&#x22;next&#x22;, value); }, function (err) { step(&#x22;throw&#x22;, err); }); } } return step(&#x22;next
&#x22;); }); }; }

const makeAsyncApi = client =&#x3e; {

let inQuery = false;

function query(sql) {
  for (var _len = arguments.length, values = Array(_len &#x3e; 1 ? _len - 1 : 0), _key = 1; _key &#x3c; _len; _key++) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.pg-async.sql" id="apidoc.module.pg-async.sql">module pg-async.sql</a></h1>


    <h2>
        <a href="#apidoc.element.pg-async.sql.SqlFragment" id="apidoc.element.pg-async.sql.SqlFragment">
        function <span class="apidocSignatureSpan">pg-async.sql.</span>SqlFragment
        <span class="apidocSignatureSpan">(templateParts, templateValues)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">class SqlFragment {

  // SQL`insert into $quote${tableName} $values${keyValue}`;
  constructor(templateParts, templateValues) {
    this._parts = [];
    this.values = [];

    const length = templateValues.length;
    const text = [];
    let currentFragment = [];
    let argIndex = 1;

    let i = 0;

    const addText = str =&#x3e; {
      currentFragment.push(str);
    };

    const flushText = () =&#x3e; {
      const fragment = currentFragment.join(&#x27;&#x27;);
      currentFragment = [];
      this._parts.push(fragment);
      text.push(fragment);
    };

    const addValue = value =&#x3e; {
      flushText();
      this.values.push(value);
      text.push(&#x27;$&#x27;, argIndex++);
    };

    while (i &#x3c; length) {
      const parts = templateParts[i].split(&#x27;$&#x27;);
      let value = templateValues.shift();
      if (typeof value === &#x27;undefined&#x27;) throw new Error(`Expected something, but got undefined. ` + `Value after SQL fragment: ${
text.join(&#x27;&#x27;) }${ templateParts[i] }`);

      while (parts.length &#x3e; 1) value = SQL.transform(parts.pop(), value);

      addText(parts[0]);

      if (value &#x26;&#x26; value.toSQL) value = value.toSQL();

      if (value instanceof SqlFragment) {
        const nestedValuesLength = value.values.length;
        let valueIndex = 0;
        while (valueIndex &#x3c; nestedValuesLength) {
          addText(value._parts[valueIndex]);
          addValue(value.values[valueIndex]);
          valueIndex++;
        }
        addText(value._parts[valueIndex]);
      } else {
        addValue(value);
      }
      i++;
    }
    // last part is alone, without value
    addText(templateParts[i]);
    flushText();

    this.text = text.join(&#x27;&#x27;);
  }

  // this is for log/debugging only
  toString() {
    if (this._asString) return this._asString;

    const text = [];
    const length = this.values.length;
    let i = 0;
    while (i &#x3c; length) {
      text.push(this._parts[i]);
      const value = literal(this.values[i]);
      text.push(value);
      i++;
    }
    text.push(this._parts[i]);
    this._asString = text.join(&#x27;&#x27;);
    return this._asString;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pg-async.sql.default" id="apidoc.element.pg-async.sql.default">
        function <span class="apidocSignatureSpan">pg-async.sql.</span>default
        <span class="apidocSignatureSpan">(parts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SQL(parts) {
  for (var _len = arguments.length, values = Array(_len &#x3e; 1 ? _len - 1 : 0), _key = 1; _key &#x3c; _len; _key++) {
    values[_key - 1] = arguments[_key];
  }

  // eslint-disable-line prefer-const
  // only one argument, called manually
  if (!Array.isArray(parts) &#x26;&#x26; values.length === 0) {
    if (parts instanceof SqlFragment) return parts;

    parts = [parts];
  }

  return new SqlFragment(parts, values);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

var _sql = require(&#x27;./sql&#x27;);

var _sql2 = _interopRequireDefault(_sql);

function _interopRequireDefault(obj) { return obj &#x26;&#x26; obj.__esModule ? obj : { default: obj }; }

function _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new _bluebird2.<span class="apidocCodeKeywordSpan
">default</span>(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; }
catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return _bluebird2.default.resolve(value).then
(function (value) { step(&#x22;next&#x22;, value); }, function (err) { step(&#x22;throw&#x22;, err); }); } } return step(&#x22;next
&#x22;); }); }; }

const makeAsyncApi = client =&#x3e; {

let inQuery = false;

function query(sql) {
  for (var _len = arguments.length, values = Array(_len &#x3e; 1 ? _len - 1 : 0), _key = 1; _key &#x3c; _len; _key++) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pg-async.sql.escapeIdentifier" id="apidoc.element.pg-async.sql.escapeIdentifier">
        function <span class="apidocSignatureSpan">pg-async.sql.</span>escapeIdentifier
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">escapeIdentifier = function (str) {

  var escaped = &#x27;&#x22;&#x27;;

  for(var i = 0; i &#x3c; str.length; i++) {
    var c = str[i];
    if(c === &#x27;&#x22;&#x27;) {
      escaped += c + c;
    } else {
      escaped += c;
    }
  }

  escaped += &#x27;&#x22;&#x27;;

  return escaped;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pg-async.sql.escapeLiteral" id="apidoc.element.pg-async.sql.escapeLiteral">
        function <span class="apidocSignatureSpan">pg-async.sql.</span>escapeLiteral
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">escapeLiteral = function (str) {

  var hasBackslash = false;
  var escaped = &#x27;\&#x27;&#x27;;

  for(var i = 0; i &#x3c; str.length; i++) {
    var c = str[i];
    if(c === &#x27;\&#x27;&#x27;) {
      escaped += c + c;
    } else if (c === &#x27;\\&#x27;) {
      escaped += c + c;
      hasBackslash = true;
    } else {
      escaped += c;
    }
  }

  escaped += &#x27;\&#x27;&#x27;;

  if(hasBackslash === true) {
    escaped = &#x27; E&#x27; + escaped;
  }

  return escaped;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pg-async.sql.identifier" id="apidoc.element.pg-async.sql.identifier">
        function <span class="apidocSignatureSpan">pg-async.sql.</span>identifier
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function identifier(name) {
  if (!name) throw new Error(`Expected nonempty string, got ${ (0, _util.inspect)(name) }`);

  return SQL(escapeIdentifier(name));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pg-async.sql.insert_object" id="apidoc.element.pg-async.sql.insert_object">
        function <span class="apidocSignatureSpan">pg-async.sql.</span>insert_object
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function insert_object(data) {
  const keys = Object.keys(data);
  const length = keys.length;
  const sqlFragments = new Array(length);
  const values = new Array(length - 1);
  const sb = [];

  sb.push(&#x27;(&#x27;);
  let i = 0;
  while (i &#x3c; length) {
    const column = keys[i];
    values[i] = data[column];
    i++;
    sb.push(escapeIdentifier(column), &#x27;,&#x27;);
    sqlFragments[i] = &#x27;,&#x27;;
  }
  sb[sb.length - 1] = &#x27;) VALUES (&#x27;;
  sqlFragments[0] = sb.join(&#x27;&#x27;);
  sqlFragments[i] = &#x27;)&#x27;;

  return new SqlFragment(sqlFragments, values);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pg-async.sql.literal" id="apidoc.element.pg-async.sql.literal">
        function <span class="apidocSignatureSpan">pg-async.sql.</span>literal
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function literal(value) {
  if (value instanceof SqlFragment) return value;

  if (typeof value === &#x27;undefined&#x27;) throw new Error(`Expected something, but got undefined.`);

  if (value === null) return SQL.NULL;

  if (value.toPostgres) return SQL(escapeLiteral(value.toPostgres(_utils.prepareValue)));

  if (value.toSQL) return SQL(value.toSQL());

  return SQL(escapeLiteral(value.toString()));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pg-async.sql.sqlStr" id="apidoc.element.pg-async.sql.sqlStr">
        function <span class="apidocSignatureSpan">pg-async.sql.</span>sqlStr
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function sqlStr(str) {
  if (typeof str !== &#x27;string&#x27;) throw new Error(`Expected string, got ${ (0, _util.inspect)(str) }`);

  return SQL(str);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
